# rename_images.py 操作说明

## 功能介绍

`rename_images.py` 是一个用于处理 Markdown 文件中图像引用的 Python 脚本。它主要完成以下功能：

1. 为 Markdown 文件中引用的图像添加指定前缀
2. 更新 Markdown 文件中的图像引用路径
3. 删除未被引用的图像文件
4. 删除已重命名的原始图像文件

## 使用方法

### 基本用法

```bash
python rename_images.py 文件名 [前缀]
```

### 参数说明

- `文件名`：必填参数，指定要处理的 Markdown 文件名（不包含 `.md` 扩展名）
- `前缀`：可选参数，指定要添加的图像文件名前缀。如果不提供，将默认使用 `文件名_` 作为前缀

### 示例

```bash
# 处理 1.md 文件，使用默认前缀 "1_"
python rename_images.py 1

# 处理 1.md 文件，使用自定义前缀 "dify"
python rename_images.py 1 dify
```

## 工作原理

1. 脚本会读取指定的 Markdown 文件（如 `1.md`）
2. 查找文件中所有形如 `![任意文本](./1/图片名.png)` 或 `![任意文本](./1\图片名.png)` 的图像引用
3. 在对应的图像目录（与 Markdown 文件同名的文件夹，如 `1` 文件夹）中：
   - 为每个被引用的图像创建一个添加了前缀的副本
   - 更新 Markdown 文件中的引用路径，指向新的图像文件
   - 删除未被引用的图像文件
   - 删除已重命名的原始图像文件

## 注意事项

1. 脚本假设图像文件存放在与 Markdown 文件同名的目录中
2. 脚本会删除未被引用的图像文件，请确保这些文件不再需要
3. 脚本会删除已重命名的原始图像文件，操作前请确保数据已备份
4. 图像引用路径必须符合格式 `./1/图片名.png` 或 `./1\图片名.png`

## 执行流程

1. 读取 Markdown 文件内容
2. 查找所有图像引用
3. 获取图像目录中的所有图像文件
4. 为引用的图像创建添加前缀的副本
5. 更新 Markdown 文件中的引用路径
6. 删除未被引用的图像文件
7. 删除已重命名的原始图像文件
8. 完成操作并输出结果

## 适用场景

- 整理和规范化 Markdown 文档中的图像资源
- 为图像添加统一的命名前缀
- 清理未使用的图像资源
- 优化 Markdown 文档的图像引用结构